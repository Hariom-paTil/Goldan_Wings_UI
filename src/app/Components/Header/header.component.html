<header class="header">
  <div class="logo">
    <img src="assets/Shop_Logo.jpg" alt="Cake shop logo" />
    <div class="brand">
      <span class="brand__title">Golden Cakes</span>
      <span class="brand__tagline">Fresh â€¢ Sweet â€¢ Delightful</span>
    </div>
  </div>

  <ng-container *ngIf="!isAdminLoggedIn">
    <nav class="nav">
      <a routerLink="/" routerLinkActive="nav__link--active" class="nav__link">Home</a>
      <a routerLink="/about" routerLinkActive="nav__link--active" class="nav__link">About</a>
      <a routerLink="/contacts" routerLinkActive="nav__link--active" class="nav__link">Contacts</a>
      <button class="nav__link nav__link--button" (click)="openOrder()">Cakes</button>
      <button class="nav__link nav__link--button" (click)="openCustomize()">Customize</button>
    </nav>
  </ng-container>

  <ng-container *ngIf="isAdminLoggedIn">
    <nav class="nav admin-nav">
      <button class="nav__link nav__link--button" (click)="navigateToPopOrders()">Pop Orders</button>
      <button class="nav__link nav__link--button" (click)="navigateToAddCakes()">Add Cakes</button>
    </nav>
  </ng-container>

  <div class="actions">
    <ng-container *ngIf="!isAdminLoggedIn">
      <button class="icon-button help-button" aria-label="Help" title="Help" (click)="openHelp()">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.6" />
          <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <circle cx="12" cy="20" r="1" fill="currentColor" />
        </svg>
      </button>

      <button class="icon-button cart-button" aria-label="Open cart" (click)="openCart()">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path
            d="M7 4h-2l-1 2m0 0 2 10h11l2-8H6.2m-2.2-2H21"
            stroke="currentColor"
            stroke-width="1.6"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <circle cx="9.5" cy="19.5" r="1.3" fill="currentColor" />
          <circle cx="17" cy="19.5" r="1.3" fill="currentColor" />
        </svg>
        <span class="cart-count" *ngIf="count$ | async as c">{{ c }}</span>
      </button>

      <!-- Sign up / user avatar -->
      <ng-container *ngIf="user$ | async as user; else showSignUpBtn">
        <div class="avatar-wrap">
          <button class="avatar-button" aria-label="User account" title="{{ user.email }}" (click)="toggleMenu()">
            <span class="avatar">ðŸ˜Š</span>
          </button>

          <div class="avatar-menu" *ngIf="showMenu">
            <button class="menu-item" (click)="logout()">Logout</button>
          </div>
        </div>
      </ng-container>

      <ng-template #showSignUpBtn>
        <button class="signup-button" (click)="openSignup()">Sign Up</button>
      </ng-template>
    </ng-container>

    <ng-container *ngIf="isAdminLoggedIn">
      <button class="logout-button" (click)="adminLogout()">Logout</button>
    </ng-container>
  </div>

  <!-- Sign up modal -->
  <app-signup *ngIf="showSignup" (close)="closeSignup()"></app-signup>

  <!-- Order modal -->
  <app-order-modal *ngIf="showOrder" (close)="closeOrder()"></app-order-modal>

  <!-- Cart modal -->
  <app-cart-modal *ngIf="showCart" (close)="closeCart()" (checkout)="openOrderConfirm()"></app-cart-modal>

  <!-- Order confirm modal (checkout) -->
  <app-order-confirm *ngIf="showOrderConfirm" (close)="closeOrderConfirm()"></app-order-confirm>
  
  <!-- Customize modal -->
  <app-customize *ngIf="showCustomize" (close)="closeCustomize()"></app-customize>

  <!-- Help modal -->
  <app-help *ngIf="showHelp" (close)="closeHelp()"></app-help>
</header>

